import{T as o,X as m,dc as s,j as c,va as n}from"./chunk-J6KB4N7K.js";var d=class a{constructor(r){this.platformId=r;if(s(this.platformId)){let t=localStorage.getItem("cart");t&&(this.cartItems=JSON.parse(t),this.cartSubject.next(this.cartItems))}}cartItems=[];cartSubject=new c([]);getCart(){return this.cartSubject.asObservable()}addToCart(r,t=1){let e=this.cartItems.find(i=>i.watch.id===r.id);e?e.quantity+=t:this.cartItems.push({watch:r,quantity:t}),this.updateCart()}removeFromCart(r){this.cartItems=this.cartItems.filter(t=>t.watch.id!==r),this.updateCart()}updateQuantity(r,t){let e=this.cartItems.find(i=>i.watch.id===r);e&&(e.quantity=t,this.updateCart())}clearCart(){this.cartItems=[],this.updateCart()}getTotal(){return this.cartItems.reduce((r,t)=>r+t.watch.price*t.quantity,0)}updateCart(){this.cartSubject.next([...this.cartItems]),s(this.platformId)&&localStorage.setItem("cart",JSON.stringify(this.cartItems))}static \u0275fac=function(t){return new(t||a)(m(n))};static \u0275prov=o({token:a,factory:a.\u0275fac,providedIn:"root"})};export{d as a};
